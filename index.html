<!DOCTYPE html>  
<html lang="NL">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>grandGesture</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style id="mkstylesheet">
body{-webkit-font-smoothing:antialiased;font-family:"Helvetica Neue",Helvetica,Arial,Verdana,sans-serif;margin:30px 0 0;padding:0;background:#fff;color:#303030;font-size:14px;line-height:1.45}#wrapper{padding:20px}li{font-size:110%}li li{font-size:100%}li p{font-size:100%;margin:.5em 0}h1{color:#000}h2{color:#111}h3{color:#111}h4{color:#111}h5{color:#111}h6{color:#111;font-style:italic}p,td,div{color:#111;font-family:"Helvetica Neue",Helvetica,Arial,Verdana,sans-serif;word-wrap:break-word}a{color:#0d6ea1;text-decoration:none;-webkit-transition:color .2s ease-in-out;-moz-transition:color .2s ease-in-out;-o-transition:color .2s ease-in-out;-ms-transition:color .2s ease-in-out;transition:color .2s ease-in-out}a:hover{color:#3593d9}h1,h2,h3,h4,h5{margin:2.75rem 0 1rem;font-weight:600;line-height:1.15}h1{margin-top:0;font-size:3.052em}h2{font-size:2.441em}h3{font-size:1.953em}h4{font-size:1.563em}h5{font-size:1.25em}ul,ol,pre,table,blockquote{margin-top:.625em;margin-bottom:.625em}hr{border:1px solid;margin:-1px 0}ul ul,ol ol,ul ol,ol ul{margin-top:0;margin-bottom:0}b,strong,em,small,code{line-height:1}.footnote{color:#0d6ea1;font-size:.8em;vertical-align:super}abbr,acronym{border-bottom:1px dotted #aaa}#wrapper img{max-width:100%;height:auto}dd{font-size:1em;margin-bottom:1em}li>p:first-of-type{margin:0}li p+p{margin-top:16px}ul,ol{padding-left:2.5rem}#wrapper ol{list-style-position:outside}ul ul,ul ol{margin-bottom:.4em}caption,col,colgroup,table,tbody,td,tfoot,th,thead,tr{border-spacing:0}table{border:1px solid rgba(0,0,0,0.25);border-collapse:collapse;display:table;empty-cells:hide;margin:-1px 0 1.3125em;padding:0;table-layout:fixed}caption{display:table-caption;font-weight:700}col{display:table-column}colgroup{display:table-column-group}tbody{display:table-row-group}tfoot{display:table-footer-group}thead{display:table-header-group}td,th{display:table-cell}tr{display:table-row}table th,table td{font-size:1.1em;line-height:1.3;padding:.5em 1em 0}table thead{background:rgba(0,0,0,0.15);border:1px solid rgba(0,0,0,0.15);border-bottom:1px solid rgba(0,0,0,0.2)}table tbody{background:rgba(0,0,0,0.05)}table tfoot{background:rgba(0,0,0,0.15);border:1px solid rgba(0,0,0,0.15);border-top:1px solid rgba(0,0,0,0.2)}figure{display:inline-block;overflow:hidden;position:relative;margin:1em 0 2em}figcaption{font-style:italic;text-align:center;background:white;color:#666}.poetry pre{display:block;font-family:Georgia,Garamond,serif !important;font-size:110% !important;font-style:italic;line-height:1.6em;margin-left:1em}.poetry pre code{font-family:Georgia,Garamond,serif !important;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;hyphens:auto;white-space:pre-wrap}blockquote p{font-size:110%;font-style:italic;line-height:1.6em}sup,sub,a.footnote{font-size:1.4ex;height:0;line-height:1;position:relative;vertical-align:super}sub{vertical-align:sub;top:-1px}p{font-size:1.1429em;line-height:1.3125em;margin:1.3125em 0}dt,th{font-weight:700}table tr:nth-child(odd),table th:nth-child(odd),table td:nth-child(odd){background:rgba(255,255,255,0.06)}table tr:nth-child(even),table td:nth-child(even){background:rgba(200,200,200,0.25)}@media print{img,table,figure{page-break-inside:avoid}#wrapper{background:#fff;color:#303030;padding:10px;position:relative;text-indent:0}}@media screen{.inverted{background:#252a2a}.inverted #wrapper{background:#252a2a;color:#eee}.inverted hr{border-color:#333f40 !important}.inverted p,.inverted td,.inverted li,.inverted h1,.inverted h2,.inverted h3,.inverted h4,.inverted h5,.inverted h6,.inverted th,.inverted .math,.inverted caption,.inverted dt,.inverted dd{color:#eee}.inverted pre{background:#ccc;color:#111}.inverted table{background:none}.inverted table tr:nth-child(odd),.inverted table td:nth-child(odd){background:none}.inverted a{color:#acd1d5}::selection{background:rgba(157,193,200,0.5)}h1::selection{background-color:rgba(45,156,208,0.3)}h2::selection{background-color:rgba(90,182,224,0.3)}h3::selection,h4::selection,h5::selection,h6::selection,li::selection,ol::selection{background-color:rgba(133,201,232,0.3)}code::selection{background-color:rgba(0,0,0,0.7);color:#eee}code span::selection{background-color:rgba(0,0,0,0.7) !important;color:#eee !important}a::selection{background-color:rgba(255,230,102,0.2)}.inverted a::selection{background-color:rgba(255,230,102,0.6)}td::selection,th::selection,caption::selection{background-color:rgba(180,237,95,0.5)}}.mkstyle--swiss #wrapper aside.blurb:before{margin-top:.7em}
#mkreplaced-toc{list-style-position:inside;padding:0;margin:0 0 0 1rem;list-style-type:none}#mkreplaced-toc li::before{content:''}#mkreplaced-toc li{font-size:1rem;line-height:1.25;font-weight:normal}#mkreplaced-toc li ul{font-size:1.3rem;font-weight:300;padding:.5rem 0;margin:0 0 0 1rem}#mkreplaced-toc li.missing{list-style-type:none !important}#mkreplaced-toc.max-1 ul,#mkreplaced-toc.max1 ul{display:none}#mkreplaced-toc.max-2 ul ul,#mkreplaced-toc.max2 ul ul{display:none}#mkreplaced-toc.max-3 ul ul ul,#mkreplaced-toc.max3 ul ul ul{display:none}#mkreplaced-toc.max-4 ul ul ul ul,#mkreplaced-toc.max4 ul ul ul ul{display:none}#mkreplaced-toc.max-5 ul ul ul ul ul,#mkreplaced-toc.max5 ul ul ul ul ul{display:none}.mk-rtl{direction:rtl;text-align:right}body.mkkatex-number-equations{counter-reset:eqnum}body.mkkatex-number-equations .katex-display{position:relative}body.mkkatex-number-equations .katex-display::after{counter-increment:eqnum;content:"(" counter(eqnum) ")";position:absolute;left:0;top:25%}body.mkkatex-number-equations.mkkatex-number-equations-right .katex-display::after{right:0;left:auto}.mkprinting,.mkprinting #wrapper{height:auto;margin-bottom:0;padding-bottom:0}.hideProgress #generated-toc,.hideProgress #firstdiff,.hideProgress #toc-title,.hideProgress #mkdocumentprogress,.hideProgress #mkincludechart,.hideProgress #mkprogressbar1,.hideProgress #mkprogressbar2,.hideProgress b.bookmark,.hideProgress .mkscrollmeter,.hideProgress #alllinks,.hideProgress #criticnav,.hideProgress .popup,.hideProgress #progressindicator,.hideProgress #mkautoscroll,.mkprinting #generated-toc,.mkprinting #firstdiff,.mkprinting #toc-title,.mkprinting #mkdocumentprogress,.mkprinting #mkincludechart,.mkprinting #mkprogressbar1,.mkprinting #mkprogressbar2,.mkprinting b.bookmark,.mkprinting .mkscrollmeter,.mkprinting #alllinks,.mkprinting #criticnav,.mkprinting .popup,.mkprinting #progressindicator,.mkprinting #mkautoscroll{display:none !important}.hideProgress .mkstyledtag,.mkprinting .mkstyledtag{display:none}.mkcolor-grammar-error,.mkcolor-spell-error{background:none;border-bottom:none}.mkprinting.mkshowcomments .mkstyledtag{display:inline;background:#ccc;padding:3px 9px;border-radius:20px;font-size:1}@media print{body{background:white;line-height:1.4}html,body,#wrapper{-moz-box-shadow:none;-webkit-box-shadow:none;box-shadow:none;-webkit-perspective:none !important;-webkit-text-size-adjust:none;border:0;box-sizing:border-box;float:none;margin:0;max-width:100%;padding:0;margin-top:0;width:auto}.critic #wrapper mark.crit{background-color:#fffd38 !important;text-decoration:none;color:#000}h1,h2,h3,h4,h5,h6{page-break-after:avoid}p,h2,h3{orphans:3;widows:3}section{page-break-before:avoid}pre>code{white-space:pre;word-break:break-word}#generated-toc,#firstdiff,#toc-title,#mkdocumentprogress,#mkincludechart,#mkprogressbar1,#mkprogressbar2,.mkscrollmeter,#alllinks,.popup{display:none !important}.suppressprintlinks a{border-bottom:none !important;color:inherit !important;cursor:default !important;text-decoration:none !important}.hrefafterlinktext #wrapper a:link:after,.hrefafterlinktext #wrapper a:visited:after{content:" (" attr(href) ") ";font-size:90%;opacity:.9}.nocodebreak pre{page-break-inside:avoid}img,table,figure{page-break-inside:avoid}.breakfootnotes .footnotes{page-break-before:always}.breakfootnotes .footnotes hr{display:none}#mktoctitle{display:block}#print-title{border-bottom:solid 1px #666;display:block}#wrapper pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{display:block}.task-list{padding-left:3.3rem}.mkstyle--ink .task-list,.mkstyle--swiss .task-list{padding-left:3.3rem !important}.mkstyle--upstandingcitizen .task-list,.mkstyle--github .task-list{padding-left:3.6rem !important}.mkstyle--manuscript .task-list{padding-left:2.4rem !important}.mkstyle--amblin .task-list{padding-left:2.1rem !important}.mkstyle--grump .task-list{padding-left:1rem !important}.mkstyle--grump .task-list .task-list-item-checkbox{left:0 !important}.task-list .task-list-item{list-style-type:none !important;left:auto}.task-list .task-list-item .task-list-item-checkbox{-webkit-appearance:none;position:relative;left:auto}.task-list .task-list-item .task-list-item-checkbox:before{border:solid 1px #aaa;border-radius:2px;color:white;content:' ';display:block;font-weight:bold;height:1em;left:-1rem;line-height:1;position:absolute;text-align:center;top:-.75em;width:1em}.task-list .gh-complete.task-list-item .task-list-item-checkbox:before{background:#838387;content:'\2713'}}
#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc,#wrapper #generated-toc-clone ul,#wrapper #mkreplaced-toc ul{list-style-position:inside}#wrapper #generated-toc-clone li.missing,#wrapper #mkreplaced-toc li.missing{list-style-type: none!important}#wrapper #generated-toc-clone ul,#wrapper #mkreplaced-toc ul{list-style-type: upper-roman}#wrapper #generated-toc-clone>ul>li>ul,#wrapper #mkreplaced-toc>li>ul {list-style-type: decimal}#wrapper #generated-toc-clone>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul{list-style-type: decimal-leading-zero}#wrapper #generated-toc-clone>ul>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul{list-style-type: lower-greek}#wrapper #generated-toc-clone>ul>li>ul>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul{list-style-type: disc}#wrapper #generated-toc-clone>ul>li>ul>li>ul>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul>li>ul{list-style-type: square}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{}
</style>

<style id="mkprintstyles">@media print{#wrapper #generated-toc-clone,#generated-toc{display:none!important}
html,body,#wrapper{font-size:10pt!important}
}
</style>


  </head>
<body class="normal">
  <div id="wrapper">
<h1 id="grand-gesture">Grand gesture</h1>

<h2 id="hoe-je-de-computer-je-gebaren-en-tekeningen-laat-herkennen">Hoe je de computer je gebaren en tekeningen laat herkennen</h2>

<p>Deze les is gebaseerd om een lezing van Jens Mönig, de ontwikkelaar van Snap, waarvan de 40 minuten video uitleg <a href="https://www.youtube.com/watch?v=xk4wo7Yql-U">hier</a> te bekijken is.</p>

<h2 id="leerdoelen">Leerdoelen</h2>

<p>Het zelf helemaal uitprogrammeren van een praktisch probleem is een goede oefening vaardiger te worden in programmeren. Omdat programmeren <em>het</em> gereedschap is om computers nuttig voor ons te maken is dat een doel.</p>

<p><img src="images/HowToSolveIt.jpg" alt="How to solve it, eerste editie 1945" /></p>

<p>Belangrijker is meer vertrouwd worden met een algemene aanpak die je niet alleen bij informatica kunt gebruiken. De wiskundige György Pólya schreef in 1945 een uiterst nuttig boekje <a href="https://en.wikipedia.org/wiki/How_to_Solve_It">How to solve it</a> met het volgende algemene stappenplan</p>

<ol>
<li>Zorg dat je het probleem dat je wilt oplossen <em>begrijpt</em></li>
<li>Nadat je het begrijpt maak je een plan (rekening houdend met de gereedschappen die je beheerst)</li>
<li>Voer het plan uit</li>
<li>Kijk naar het resultaat. Kan het beter?</li>
</ol>


<p>Iedereen die een exacte studie overweegt doet er goed aan de komende tien jaar dit boekje een paar keer te lezen!</p>

<p>Deze lesbrief kent analoog aan Pólya vier hoofdstukken: probleem afbakening, plan, uitvoering en opties voor verbetering.</p>

<h2 id="probleem-afbakening">Probleem afbakening</h2>

<p>Tijdens de les hebben we het gehad over gebaren met je vingers op een scherm van telefoon, bijvoorbeeld <em>swipe</em> en <em>pinch</em>. We hebben het ook gehad over het tekenen van vormen (cirkel, hartje, ster, …) en hoe de computer die zou herkennen.</p>

<p>Op dit moment beperken we ons tot het tweede onderdeel. We willen dat de computer in reactie op een tekenactie van ons kan vertellen wat we getekend hebt. Omdat de computer van zichzelf niets weet zullen we de computer eerst moeten <em>trainen</em>. We willen in de computer een lijst hebben van eerder gemaakte tekeningen met hun benaming. Dat stelt dus meteen vragen over hoe een tekening in de computer kan worden opgeslagen. En als we dan zo'n collectie bekende tekeningen hebben, hoe bepalen we welke het meest lijkt om onze nieuwe tekening.</p>

<p><img src="images/raraWatishet.png" alt="Wat is de vorm in het midden?" /></p>

<p>Hier gaan we gebruik maken van het idee dat een getekende vorm eigenlijk een lijst van punten is. Tijdens het tekenen gaan we een lijst bijhouden van de muisposities. Zo'n lijst kunnen we gebruiken om de vorm (opnieuw) te tekenen, maar we kunnen nu ook twee vormen vergelijken door de twee lijsten te vergelijken. Wanneer vinden we dat twee lijsten (ongeveer) dezelfde vorm representeren? We kunnen punt-voor-punt de afstand meten, bij elkaar optellen en als die som niet al te groot is besluiten dat de lijsten dezelfde vorm weergeven. Dit vraagt niet alleen om een functie die de afstand tussen twee punten berekent, maar ook (en dat is ingewikkelder) om lijsten die goed te vergelijken zijn, bijvoorbeeld doordat ze hetzelfde aantal punten hebben.</p>

<p><img src="images/tekenSnelheid.png" alt="Tekensnelheid beïnvloed aantal waargenomen muisposities" /><br/>
<img src="images/vergelijkCirkels.png" alt="Standardisatie muisposities" /><br/>
<img src="images/verschilSterCirkel.png" alt="Vergelijking Cirkel Ster" /></p>

<h2 id="plan">Plan</h2>

<ul>
<li>Een muisklik ergens op het canvas start de <em>opname</em> van een nieuwe schets.</li>
<li>Het opnemen van een schets is het verzamelen van de muisposities in een lijst</li>
<li>We willen de schets zichtbaar maken als tekening, en als tekening met voor iedere muispositie een wat dikkere stip</li>
<li>We willen schetsen standardiseren to een vast aantal punten, bijvoorbeeld 64, die netjes verdeeld zijn tussen begin en eind</li>
<li>We willen schetsen met hun naam (hart, ster, …) kunnen opnemen in een lijst van voorbeelden</li>
<li>We willen het verschil tussen twee schetsen kunnen uitrekenen door puntsgewijs de afstanden op te tellen</li>
<li>We willen bij een nieuwe schets in de lijst van voorbeelden een best passende kunnen selecteren.</li>
<li>…</li>
</ul>


<p>We werken met <a href="https://snap.berkeley.edu/run">Snap!</a> omdat we geleerd hebben hoe we in dat programma met lijsten kunnen omgaan en hoe we met de <em>pen</em>-blokken kunnen tekenen.</p>

<h2 id="bouwen">Bouwen</h2>

<h3 id="muis-indrukken-om-te-starten">Muis indrukken om te starten</h3>

<p>Zodra er ergens op het canvas de muis wordt ingedrukt, willen we dat ons programma start. We kunnen dit eenvoudig bereiken door het <strong>speelveld</strong> te prograameren om een signaal te sturen als de muis wordt ingedrukt. De <strong>sprite</strong>, die we sensor zouden kunnen noemen, moet dan in actie komen als dat signaal binnenkomt.</p>

<p><img src="images/indrukkenVoorStart.png" alt="Indrukken voor start" /></p>

<p><img src="images/startSignaalOntvangst.png" alt="Start signaal ontvangst" /></p>

<h3 id="een-lijst-maken-om-muisposities-te-onthouden">Een lijst maken om muisposities te onthouden</h3>

<p>We hebben een variabele <strong>schets</strong> nodig die we aan het begin <em>initialiseren</em> als lege lijst.</p>

<p><img src="images/intialiseerSchetsAlsLegeLijst.png" alt="Intialiseer schets als lege lijst" /></p>

<h3 id="hoe-gaan-we-muisposities-vastleggen-en-hoe-lang-gaan-we-daarmee-door">Hoe gaan we muisposities vastleggen, en hoe lang gaan we daarmee door?</h3>

<p>Het loslaten van de muisknop markeert het einde van onze tekening, dus zijn we blij dat Snap! een <em>herhaal tot</em>-blok kent. Wat moeten we herhalen? Muisposities vastleggen! En als we toch bezig zijn kunnen we de tekening ook in beeld brengen.</p>

<p><img src="images/muispositiesOpnemenTotMuisIngedrukt.png" alt="Herhaal muisposities opnemen tot muis los" /></p>

<p>Merk op dat je in plaats van <img src="images/lijstMuisXMuisY.png" alt="Lijst MuisX, MuisY" /> ook <img src="images/mousePosition.png" alt="Mouse Position" /> kunt gebruiken. Dat laatste blok is nieuw en nog niet naar het Nederlands vertaald, en rapporteert een lijstje met x- en y-waarde van de muis.</p>

<h3 id="de-muisposties-zichtbaar-maken">De muisposties zichtbaar maken</h3>

<p>Om in de tekening, die na bovenstaande is vastgelegd in variabele <strong>schets</strong>, de muisposties zichtbaar te maken, maken we een tekenopdracht:</p>

<p><img src="images/tekenSchetsMetPuntenBlok.png" alt="Blok om schets te tekenen" /></p>

<h3 id="de-schets-re-samplen-naar-een-vast-aantal-punten.">De schets <em>re samplen</em> naar een vast aantal punten.</h3>

<p>Het blijkt nog best lastig te zijn om helder uit te leggen hoe je een schets met, zeg, 150 punten <em>resampled</em> naar 64 punten. Het idee is in grote lijnen om eerste de lengte van de schets te bepalen, door de lengtes van alle segmenten bij elkaar op te tellen. Vervolgens deel je die lengte door het gewenste aantal punten min één, om de afstand te bepalen tussen de punten in de nieuwe lijst. Daarna loop je de oude schets af, waarbij je na iedere <em>segment lengte</em> een nieuw punt aan de lijst toevoegt.</p>

<p>Heronder zie je de complete code. Je kan die ook <a href="https://github.com/xota/grandGesture/images/beperkSchetsTotAantalPunten.xml">downloaden</a> en vervolgens in je eigen project importeren met import of door slepen vanuit downloadmap naar Snap!-project. Wie tijd over heeft bouwt het zelf met deze afbeelding als leidraad.</p>

<p><img src="images/beperkSchetsTotAantalPunten.png" alt="Beperk schets tot aantal punten" /></p>

<h3 id="schets-toevoegen-aan-voorbeelden">Schets toevoegen aan voorbeelden</h3>

<p>Zeker in het begin, maar wie weet ook later als je nieuwe vormen wil toevoegen, wil je de computer leren wat de schets voorstelt. Voor bedieningsgemak maak ik dat vast aan de toets <strong>1</strong>.<br/>
Eenmalig heb ik een variabele <strong>voorbeelden</strong> aangemaakt en <em>geïnitialiseerd</em> als lege lijst: <img src="images/intialiseerVoorbeeldenAlsLegeLijst.png" alt="Voorbeelden geïnitialiseerd als lege lijst" /></p>

<p><img src="images/schetsToevoegenAanVoorbeelden.png" alt="Voeg schets toe aan lijst van voorbeelden" /></p>

<h3 id="een-schets-herkennen-binnen-een-voorbeelden-lijst">Een schets herkennen binnen een voorbeelden lijst</h3>

<p>Om verder te kunnen werken met het resultaat is er een functie met als invoer een gestandaardiseerde schets en lijst van voorbeelden. De uitvoer is de <em>naam</em> van het voorbeeld dat het <em>beste past</em>.</p>

<p><img src="images/functieAanroepHerkenSchets.png" alt="Aanroep functie herken schets met voorbeelden" /></p>

<p><img src="images/schetsOpzoekenInVoorbeelden.png" alt="Definitie functie herken schets met voorbeelden" /></p>

<h2 id="opties-voor-verbetering">Opties voor verbetering</h2>

<p>Vormen worden beter vergelijkbaar als we ze een zelfde grootte geven en zorgen dat ze allemaal hetzelfde middelpunt hebben.</p>

<h3 id="middelpunt-standaardiseren">Middelpunt standaardiseren</h3>

<p>Om ervoor te zorgen dat elke vorm beoordeeld wordt alsof die mooi rondom $(0, 0)$ is getekend kunnen we alle punten van de schets verschuiven. Om rond de oorsprong uit te komen moeten we de x-waarden verminderen met het gemiddelde van alle x-waarden, en de y-waarden met de gemiddelde y-waarde, dat wil zeggen een verschijven van $(-\overline{x}, -\overline{y})$.</p>

<h3 id="grootte-standaardiseren">Grootte standaardiseren</h3>

<p>De breedte van de vorm is het verschil tussen de maximale x-waarde en minimale x-waarde. Wil je dat standaardisern tot bijvoorbeeld 200 pixels, dan moeten alle punten uit de schets vermenigvuldigd worden met een factor $\frac{200}{breedte}$</p>

<h3 id="linkshandigheid">Linkshandigheid?</h3>

<p>Een vorm ziet er hetzelfde uit wanneer je schets van punt 1 tot laatst tekent, of in omgekeerde richting. Sommige figuren worden door verschillende mensen in verschillende richting getekend. Die vromen zien er dan hetzelfde uit maart hebben relatief grote onderlinge afstand omdat eigenlijk de verkeerde punten met elkaar vergeleken worden. Een begin van een oplossing checkt een neiuwe vorm niet alleen tegen alle reeds bekende voorbeelden, maar ook hun omkering:<br/>
<img src="images/omkeringSchets.png" alt="Omkering van een schets" /></p>
<!-- ##END MARKED WRAPPER## -->
    </div>
</body>
</html>